<!DOCTYPE html>
<html lang="en">
<head>
    <!--    A-frame-->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <!--physics-->
    <script src="https://unpkg.com/@c-frame/aframe-physics-system@4.2.2/dist/aframe-physics-system.min.js"></script>
    <!--    extras-->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>
    <!--    grab library (physics extra)-->
    <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>
    <!-- Environment -->
    <script src="https://unpkg.com/aframe-environment-component@1.3.x/dist/aframe-environment-component.min.js"></script>
    <!--    &lt;!&ndash;    jump library&ndash;&gt;-->
    <!--    <script src="https://cdn.jsdelivr.net/gh/daniel-schroeder-dev/aframe-jump/jump.js"></script>-->

    <!--    My own javascript module-->
    <script type="module" src="./main/js/script.js"></script>
    <meta charset="UTF-8">
    <title>ICT-practicum (controller version)</title>
</head>
<body>
<a-scene physics="gravity: -9.8;"
         vr-mode-ui="enabled: true">
    <!--    assets-->
    <a-asset-item id="navmesh"
                  src="https://c-frame.github.io/aframe-extras/examples/assets/castle/Castle-navmesh.glb"></a-asset-item>
    <a-asset-item id="castle"
                  src="https://c-frame.github.io/aframe-extras/examples/assets/castle/Castle.glb"></a-asset-item>
    <a-assets>
        <img id="cobblestone" src="main/resources/cobblestone.jpg">
    </a-assets>

    <!-- environment -->
    <a-entity environment="preset: forest; groundColor: #445; grid: cross"></a-entity>
    <!--camera and controls-->
    <a-entity kinematic-body
              movement-controls="controls: gamepad,keyboard,nipple; constrainToNavMesh: true" id="rig">
        <a-entity
                grabber
                debug-toggle
                change-physics
                joystick-direction
                laser-controls="hand: left"
                meta-touch-controls="hand: left"
                raycaster-intersections="objects: .grabbable"
                id="ctlL"
                raycaster="objects: .grabbable; lineColor: yellow; far: 4; showLine: true"
                static-body="shape: sphere; sphereRadius: 0.02;"
                geometry="primitive: sphere; radius: 0.02"
                material="color: yellow; opacity: 0.5"
                sphere-collider="objects: .grabbable;">
            <a-entity id="gripPoint"
                      position="0 0 -0.05">
            </a-entity>
        </a-entity>
        <a-entity
                grabber
                smooth-jump
                change-physics
                raycaster-intersections="objects: .grabbable"
                id="ctlR"
                laser-controls="hand: right"
                meta-touch-controls="hand: right"
                raycaster="objects: .grabbable; lineColor: blue; far: 4; showLine: true"
                static-body="shape: sphere; sphereRadius: 0.02;"
                geometry="primitive: sphere; radius: 0.02"
                material="color: yellow; opacity: 0.5"
                sphere-collider="objects: .grabbable;">
            <a-entity id="gripPoint"
                      position="0 0 -0.05">
            </a-entity>
        </a-entity>
        <a-text id="debug"
                position="0 1.5 -1"
                color="yellow"
                width="2"
                wrap-count="40"
                visible="false">
        </a-text>
        <!--        seperate camera entity, so that raycasters are not at eye level, but are coming from controllers-->
        <a-camera camera wasd-controls look-controls="pointerLockEnabled: true"></a-camera>
    </a-entity>


    <!--    ground surface-->
    <a-plane id="ground"
             src="#cobblestone"
             position="0 0.1 0"
             rotation="-90 0 0"
             width="20"
             height="20"
             static-body
             material="src: #cobblestone; repeat: 10 10;  shader: flat">
    </a-plane>

    <!-- Nav mesh. -->
    <a-entity nav-mesh
              normal-material
              visible="false"
              position="5 0 0"
              id="navmesh"
              gltf-model="#navmesh"></a-entity>
    <!-- castle -->
    <a-entity position="5 0 0"
              scale="3 3 3"
              gltf-model="#castle"
              static-body></a-entity>


    <!--    static objects-->
    <a-box static-body="shape: box;"
           position="1 2 -6"
           rotation="0 0 0"
           color="red">
    </a-box>
    <a-box static-body="shape: box;"
           position="-1 4 -6"
           rotation="0 0 0"
           color="red">
    </a-box>
    <a-box static-body="shape: box;"
           id="animatedBox"
           position="0 2 2"
           color="red"
           rotation="0 0 0"
           animation__up="property: position; to: 0 8 -5; dur: 1000; easing: easeOutQuad; dir: alternate; loop: true">
    </a-box>


    <!--    dynamische objecten-->
    <a-box class="grabbable"
           geometry="primitive: box; width: 1; height: 1; depth: 2"
           dynamic-body="shape: box; mass: 20;"
           position="-4.1 1 -6.3"
           rotation="90 0 0"
           id="magentaBox"
           color="lime">
    </a-box>
    <a-box class="grabbable"
           geometry="primitive: box; width: 1; height: 1; depth: 2"
           dynamic-body="mass: 20; shape: box;"
           position="8.3 1 3.5"
           id="orangeBox"
           color="lime">
    </a-box>
    <a-box class="grabbable"
           geometry="primitive: box; width: 1; height: 1; depth: 2"
           dynamic-body="mass: 20; shape: box;"
           rotation="90 0 0"
           position="4.5 1 6.3"
           id="blueBox"
           color="lime"></a-box>
</a-scene>
</body>
</html>
