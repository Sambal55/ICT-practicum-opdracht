<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>ICT-practicum</title>-->
<!--    &lt;!&ndash; A-Frame &ndash;&gt;-->
<!--    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>-->
<!--    &lt;!&ndash;    Workaround voor super hands&ndash;&gt;-->
<!--    <script>-->
<!--        delete AFRAME.components["grabbable"];-->
<!--    </script>-->
<!--    &lt;!&ndash; Environment &ndash;&gt;-->
<!--    <script src="https://unpkg.com/aframe-environment-component@1.3.x/dist/aframe-environment-component.min.js"></script>-->

<!--    &lt;!&ndash; A-Frame Event System &ndash;&gt;-->
<!--    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>-->

<!--    &lt;!&ndash; Physics &ndash;&gt;-->
<!--    <script src="https://unpkg.com/@c-frame/aframe-physics-system@4.2.2/dist/aframe-physics-system.min.js"></script>-->
<!--    &lt;!&ndash; A-Frame Physics Extra Add-On &ndash;&gt;-->
<!--    <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>-->

<!--    &lt;!&ndash;    extras &ndash;&gt;-->
<!--    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>-->
<!--    &lt;!&ndash; Superhands (voor grijpen met pinch) &ndash;&gt;-->
<!--    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.misc.min.js"></script>-->
<!--    <script src="https://unpkg.com/super-hands@^3.0.5/dist/super-hands.min.js"></script>-->

<!--    <script src="./main/js/script.js"></script>-->

<!--</head>-->

<!--<body>-->
<!--<a-scene physics="gravity: -9.8; debug: false" vr-mode-ui="enabled: true" background="color: #ECECEC">-->

<!--    &lt;!&ndash; Omgeving &ndash;&gt;-->
<!--    <a-entity environment="preset: forest; groundColor: #445; grid: cross"></a-entity>-->

<!--    &lt;!&ndash; Camera rig (geen vaste hoogte meer) &ndash;&gt;-->
<!--    <a-entity id="rig" movement-controls>-->
<!--        <a-entity camera look-controls wasd-controls-enabled="false">-->
<!--            <a-entity id="statusText"-->
<!--                      position="0 -0.3 -1"-->
<!--                      text="value: maat ik geef t op; color: yellow; align: center; width: 2;">-->
<!--            </a-entity>-->
<!--        </a-entity>-->
<!--    </a-entity>-->


<!--    &lt;!&ndash; Hand tracking met pinch-grab &ndash;&gt;-->
<!--    <a-entity id="leftHand" hand-tracking-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc"-->
<!--              super-hands="grabStartButtons: pinchstarted; grabEndButtons: pinchended"-->
<!--              pinch-logger="hand: left"-->
<!--              hand-grab-debug-->
<!--              static-body>-->
<!--        <a-entity position="0 0 -0.05"-->
<!--                  raycaster="objects: [grabbable]; far: 5; showLine: true; lineColor: red"-->
<!--                  line="color: red"></a-entity>-->
<!--    </a-entity>-->


<!--    <a-entity id="rightHand"-->
<!--              hand-tracking-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc"-->
<!--              super-hands="grabStartButtons: pinchstarted; grabEndButtons: pinchended"-->
<!--              pinch-logger="hand: right"-->
<!--              hand-grab-debug-->
<!--              static-body>-->
<!--        <a-entity position="0 0 -0.05"-->
<!--                  raycaster="objects: [grabbable]; far: 5; showLine: true; lineColor: green"-->
<!--                  line="color: green"></a-entity>-->
<!--    </a-entity>-->


<!--    &lt;!&ndash; Grondvlak &ndash;&gt;-->
<!--    <a-plane position="0 1 0"-->
<!--             rotation="-90 0 0"-->
<!--             width="20"-->
<!--             height="20"-->
<!--             static-body-->
<!--             color="#7BC8A4">-->
<!--    </a-plane>-->

<!--    &lt;!&ndash; Interactieve objecten &ndash;&gt;-->
<!--    <a-box hoverable grabbable draggable droppable hover-color="color: pink; original: green"-->
<!--           grab-debug-->
<!--           dynamic-body="mass: 10" position="0 3 -3"-->
<!--           rotation="45 0 45" width="0.5" height="0.5" depth="0.5" color="red"></a-box>-->

<!--    <a-box hoverable-->
<!--           grab-debug-->
<!--           grabbable draggable droppable hover-color="color: pink; original: green"-->
<!--           dynamic-body="mass: 10" position="-1 10.25 -3"-->
<!--           rotation="30 3 20" width="0.5" height="0.5" depth="0.5" color="green"></a-box>-->

<!--    <a-box hoverable-->
<!--           grab-debug-->
<!--           grabbable draggable droppable hover-color="color: pink; original: green"-->
<!--           dynamic-body="mass: 10" position="1 10.25 -3"-->
<!--           width="0.5" height="0.5" depth="0.5" color="blue"></a-box>-->

<!--    <a-box hoverable grab-debug grabbable draggable droppable-->
<!--           hover-color="color: pink; original: green"-->
<!--           dynamic-body="mass: 10" position="0 0 -2"-->
<!--           width="0.5" height="0.5" depth="0.5" color="blue"></a-box>-->

<!--    <a-cylinder grab-debug hover-color="color: pink; original: green"-->
<!--                hoverable grabbable draggable droppable dynamic-body="mass: 10" position="2 3 -4"-->
<!--                radius="0.25" height="0.5" color="yellow"></a-cylinder>-->

<!--    <a-box grab-debug hoverable grabbable draggable droppable hover-color="color: pink; original: green"-->
<!--           dynamic-body="mass: 10" position="1 2 -3.2"-->
<!--           rotation="0 0 0" width="0.5" height="0.5" depth="0.5" color="#4CC3D9"></a-box>-->

<!--    <a-box grab-debug hoverable grabbable draggable droppable hover-color="color: pink; original: green"-->
<!--           dynamic-body="mass: 10" position="-1 2 -3"-->
<!--           rotation="0 0 0" width="0.5" height="0.5" depth="0.5" color="#4CC3D9"></a-box>-->

<!--    <a-plane grab-debug hoverable grabbable draggable droppable hover-color="color: pink; original: green"-->
<!--             dynamic-body="mass: 10" position="-4 4 -4"-->
<!--             rotation="-90 0 0" width="2" height="2" color="pink"></a-plane>-->
<!--</a-scene>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="utf-8" />
    <title>Pinch grab - werkende debug versie</title>

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

    <!-- Workaround: verwijder ingebouwde grabbable (zodat super-hands zijn eigen grabbable gebruikt) -->
    <script> delete AFRAME.components['grabbable']; </script>

    <!-- Environment + Physics -->
    <script src="https://unpkg.com/aframe-environment-component@1.3.x/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/@c-frame/aframe-physics-system@4.2.2/dist/aframe-physics-system.min.js"></script>

    <!-- aframe-extras (sphere-collider) -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>

    <!-- Super-hands (grabbable / hoverable reaction components) -->
    <script src="https://unpkg.com/super-hands@^3.0.5/dist/super-hands.min.js"></script>

    <style> body { margin:0; } </style>
</head>
<body>
<a-scene physics="gravity: -9.8; debug: false" vr-mode-ui="enabled: true" background="color: #ECECEC">

    <!-- Environment -->
    <a-entity environment="preset: forest; groundColor: #445; grid: cross"></a-entity>

    <!-- Debug text voor in-world feedback -->
    <a-entity id="debugText" position="0 1.7 -1.5"
              text="value: NA DEES IS HET ECHT KLAAR; color: yellow; align: center; width: 2;">
    </a-entity>

    <!-- Camera rig -->
    <a-entity id="rig">
        <a-entity camera look-controls></a-entity>
    </a-entity>

    <!-- LEFT HAND: geen static-body, wel sphere-collider en super-hands.
         radius: 0.06 zorgt dat objecten binnen ~6cm gedetecteerd worden -->
    <a-entity id="leftHand"
              hand-tracking-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc"
              super-hands="colliderEvent: hit; colliderEventProperty: el; colliderEndEvent: hitEnd; colliderEndEventProperty: el; grabStartButtons: pinchstarted; grabEndButtons: pinchended"
              sphere-collider="objects: .pickup; radius: 0.10">
    </a-entity>

    <!-- RIGHT HAND -->
    <a-entity id="rightHand"
              hand-tracking-controls="hand: right; handModelStyle: lowPoly; color: #ccffcc"
              super-hands="colliderEvent: hit; colliderEventProperty: el; colliderEndEvent: hitEnd; colliderEndEventProperty: el; grabStartButtons: pinchstarted; grabEndButtons: pinchended"
              sphere-collider="objects: .pickup; radius: 0.10">
    </a-entity>

    <!-- Ground -->
    <a-plane rotation="-90 0 0" width="20" height="20" static-body color="#7BC8A4" position="0 0 0"></a-plane>

    <!-- Pickup objects: class .pickup (sphere-collider zoekt deze), hoverable & grabbable from super-hands, dynamic-body for physics -->
    <a-box class="pickup"
           position="0 1.2 -0.3"
           width="0.4" height="0.4" depth="0.4"
           color="red"
           hoverable
           grabbable
           dynamic-body="mass: 2">
    </a-box>

    <a-box class="pickup"
           position="0.8 1.2 -0.3"
           width="0.4" height="0.4" depth="0.4"
           color="green"
           hoverable
           grabbable
           dynamic-body="mass: 2">
    </a-box>

    <a-cylinder class="pickup"
                position="-0.8 1.2 -0.3"
                radius="0.25" height="0.4"
                color="yellow"
                hoverable
                grabbable
                dynamic-body="mass: 2">
    </a-cylinder>

</a-scene>

<script>
    /* Global event listeners for hover / grab events.
       These listen on the scene (bubbling) and update debugText and console.
       This is reliable because super-hands emits hover-start/hover-end/grab-start/grab-end on the target entities.
    */

    (function () {
        const debugEl = document.querySelector('#debugText');

        function setDebug(msg) {
            console.log('[VR DEBUG]', msg);
            if (debugEl) debugEl.setAttribute('text', 'value', msg);
        }

        // hover-start / hover-end on pickup objects
        document.addEventListener('hover-start', (ev) => {
            // ev.target is the entity that got hovered
            const target = ev.target;
            target.setAttribute('color', 'orange'); // visual hover
            setDebug(`hover-start: ${target.tagName} ${target.id || ''}`);
        });

        document.addEventListener('hover-end', (ev) => {
            const target = ev.target;
            // restore: try to read original color attribute (if you stored it) or set a default
            const orig = target.getAttribute('data-original-color') || target.getAttribute('color') || '#888';
            target.setAttribute('color', orig);
            setDebug(`hover-end: ${target.tagName} ${target.id || ''}`);
        });

        // when the scene first loads, remember original colors so we can restore them
        window.addEventListener('load', () => {
            document.querySelectorAll('.pickup').forEach(el => {
                const col = el.getAttribute('color') || '#FFF';
                el.setAttribute('data-original-color', col);
            });
        });

        // grab-start / grab-end: these events are emitted on the TARGET (the picked up object).
        document.addEventListener('grab-start', (ev) => {
            const target = ev.target; // the grabbed entity
            // mark grabbed visually
            target.setAttribute('color', 'magenta');
            // show debug text including which hand (detail.hand is the hand entity)
            const hand = (ev.detail && ev.detail.hand) ? (ev.detail.hand.id || ev.detail.hand.tagName) : 'unknown-hand';
            setDebug(`grab-start: ${target.tagName} by ${hand}`);
        });

        document.addEventListener('grab-end', (ev) => {
            const target = ev.target;
            // restore original color after release
            const orig = target.getAttribute('data-original-color') || target.getAttribute('color') || '#FFF';
            target.setAttribute('color', orig);
            const hand = (ev.detail && ev.detail.hand) ? (ev.detail.hand.id || ev.detail.hand.tagName) : 'unknown-hand';
            setDebug(`grab-end: ${target.tagName} by ${hand}`);
        });

        // Extra: log collider hits from sphere-collider so you can see range
        document.addEventListener('hit', (ev) => {
            // emitted by sphere-collider: ev.detail.el is the collided entity (if configured that way)
            const collided = ev.detail && ev.detail.el ? ev.detail.el : ev.target;
            const hand = ev.target; // the hand entity that emitted the event
            setDebug(`hand ${hand.id} HIT ${collided.tagName}`);
            console.log('sphere-collider hit event', ev);
        });

        document.addEventListener('hitEnd', (ev) => {
            const collided = ev.detail && ev.detail.el ? ev.detail.el : ev.target;
            const hand = ev.target;
            setDebug(`hand ${hand.id} HIT END ${collided.tagName}`);
            console.log('sphere-collider hitEnd', ev);
        });

    })();
</script>
</body>
</html>
